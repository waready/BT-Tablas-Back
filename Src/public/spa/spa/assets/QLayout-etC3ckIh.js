import{e as u,c as N,r as h,h as M,a4 as p,y as D,p as d,T as G,q as A,ah as J,w as H,z as E,g as k,H as X,I as F,J as K,C as U,K as Y,a6 as Z,s as ee,n as te,o as ie,a5 as ne,ai as oe,aj as le,ak as I,al as Q,am as ae,G as re}from"./index-BpGYqaui.js";import{Q as O}from"./QResizeObserver-f137fbTe.js";const se={ratio:[String,Number]};function ce(e,v){return u(()=>{const n=Number(e.ratio||(v!==void 0?v.value:void 0));return isNaN(n)!==!0&&n>0?{paddingBottom:`${100/n}%`}:null})}const ue=1.7778,he=N({name:"QImg",props:{...se,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ue},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:v,emit:n}){const o=h(e.initialRatio),c=ce(e,o),a=k(),{registerTimeout:m,removeTimeout:y}=M(),{registerTimeout:b,removeTimeout:r}=M(),w=u(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),T=u(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),f=[h(null),h(w.value)],l=h(0),z=h(!1),q=h(!1),B=u(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),R=u(()=>({width:e.width,height:e.height})),L=u(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),_=u(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function i(){if(r(),e.loadingShowDelay===0){z.value=!0;return}b(()=>{z.value=!0},e.loadingShowDelay)}function s(){r(),z.value=!1}function S({target:t}){E(a)===!1&&(y(),o.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,g(t,1))}function g(t,C){C===1e3||E(a)===!0||(t.complete===!0?$(t):m(()=>{g(t,C+1)},50))}function $(t){E(a)!==!0&&(l.value=l.value^1,f[l.value].value=null,s(),t.getAttribute("__qerror")!=="true"&&(q.value=!1),n("load",t.currentSrc||t.src))}function x(t){y(),s(),q.value=!0,f[l.value].value=T.value,f[l.value^1].value=w.value,n("error",t)}function j(t){const C=f[t].value,P={key:"img_"+t,class:L.value,style:_.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...C};return l.value===t?Object.assign(P,{class:P.class+"current",onLoad:S,onError:x}):P.class+="loaded",d("div",{class:"q-img__container absolute-full",key:"img"+t},d("img",P))}function V(){return z.value===!1?d("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},A(v[q.value===!0?"error":"default"])):d("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},v.loading!==void 0?v.loading():e.noSpinner===!0?void 0:[d(J,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){H(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,C=>{y(),q.value=!1,C===null?(s(),f[l.value^1].value=w.value):i(),f[l.value].value=C},{immediate:!0})};p.value===!0?D(t):t()}return()=>{const t=[];return c.value!==null&&t.push(d("div",{key:"filler",style:c.value})),f[0].value!==null&&t.push(j(0)),f[1].value!==null&&t.push(j(1)),t.push(d(G,{name:"q-transition--fade"},V)),d("div",{key:"main",class:B.value,style:R.value,role:"img","aria-label":e.alt},t)}}}),me=N({name:"QPageContainer",setup(e,{slots:v}){const{proxy:{$q:n}}=k(),o=X(K,F);if(o===F)return console.error("QPageContainer needs to be child of QLayout"),F;U(Y,!0);const c=u(()=>{const a={};return o.header.space===!0&&(a.paddingTop=`${o.header.size}px`),o.right.space===!0&&(a[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(a.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(a[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),a});return()=>d("div",{class:"q-page-container",style:c.value},A(v.default))}}),{passive:W}=Z,de=["both","horizontal","vertical"],fe=N({name:"QScrollObserver",props:{axis:{type:String,validator:e=>de.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:ee},emits:["scroll"],setup(e,{emit:v}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let o=null,c,a;H(()=>e.scrollTarget,()=>{b(),y()});function m(){o?.();const T=Math.max(0,oe(c)),f=le(c),l={top:T-n.position.top,left:f-n.position.left};if(e.axis==="vertical"&&l.top===0||e.axis==="horizontal"&&l.left===0)return;const z=Math.abs(l.top)>=Math.abs(l.left)?l.top<0?"up":"down":l.left<0?"left":"right";n.position={top:T,left:f},n.directionChanged=n.direction!==z,n.delta=l,n.directionChanged===!0&&(n.direction=z,n.inflectionPoint=n.position),v("scroll",{...n})}function y(){c=te(a,e.scrollTarget),c.addEventListener("scroll",r,W),r(!0)}function b(){c!==void 0&&(c.removeEventListener("scroll",r,W),c=void 0)}function r(T){if(T===!0||e.debounce===0||e.debounce==="0")m();else if(o===null){const[f,l]=e.debounce?[setTimeout(m,e.debounce),clearTimeout]:[requestAnimationFrame(m),cancelAnimationFrame];o=()=>{l(f),o=null}}}const{proxy:w}=k();return H(()=>w.$q.lang.rtl,m),D(()=>{a=w.$el.parentNode,y()}),ie(()=>{o?.(),b()}),Object.assign(w,{trigger:r,getPosition:()=>n}),ne}}),Se=N({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:v,emit:n}){const{proxy:{$q:o}}=k(),c=h(null),a=h(o.screen.height),m=h(e.container===!0?0:o.screen.width),y=h({position:0,direction:"down",inflectionPoint:0}),b=h(0),r=h(p.value===!0?0:I()),w=u(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),T=u(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),f=u(()=>r.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),l=u(()=>r.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function z(i){if(e.container===!0||document.qScrollPrevented!==!0){const s={position:i.position.top,direction:i.direction,directionChanged:i.directionChanged,inflectionPoint:i.inflectionPoint.top,delta:i.delta.top};y.value=s,e.onScroll!==void 0&&n("scroll",s)}}function q(i){const{height:s,width:S}=i;let g=!1;a.value!==s&&(g=!0,a.value=s,e.onScrollHeight!==void 0&&n("scrollHeight",s),R()),m.value!==S&&(g=!0,m.value=S),g===!0&&e.onResize!==void 0&&n("resize",i)}function B({height:i}){b.value!==i&&(b.value=i,R())}function R(){if(e.container===!0){const i=a.value>b.value?I():0;r.value!==i&&(r.value=i)}}let L=null;const _={instances:{},view:u(()=>e.view),isContainer:u(()=>e.container),rootRef:c,height:a,containerHeight:b,scrollbarWidth:r,totalWidth:u(()=>m.value+r.value),rows:u(()=>{const i=e.view.toLowerCase().split(" ");return{top:i[0].split(""),middle:i[1].split(""),bottom:i[2].split("")}}),header:Q({size:0,offset:0,space:!1}),right:Q({size:300,offset:0,space:!1}),footer:Q({size:0,offset:0,space:!1}),left:Q({size:300,offset:0,space:!1}),scroll:y,animate(){L!==null?clearTimeout(L):document.body.classList.add("q-body--layout-animate"),L=setTimeout(()=>{L=null,document.body.classList.remove("q-body--layout-animate")},155)},update(i,s,S){_[i][s]=S}};if(U(K,_),I()>0){let i=function(){g=null,$.classList.remove("hide-scrollbar")},s=function(){if(g===null){if($.scrollHeight>o.screen.height)return;$.classList.add("hide-scrollbar")}else clearTimeout(g);g=setTimeout(i,300)},S=function(x){g!==null&&x==="remove"&&(clearTimeout(g),i()),window[`${x}EventListener`]("resize",s)},g=null;const $=document.body;H(()=>e.container!==!0?"add":"remove",S),e.container!==!0&&S("add"),ae(()=>{S("remove")})}return()=>{const i=re(v.default,[d(fe,{onScroll:z}),d(O,{onResize:q})]),s=d("div",{class:w.value,style:T.value,ref:e.container===!0?void 0:c,tabindex:-1},i);return e.container===!0?d("div",{class:"q-layout-container overflow-hidden",ref:c},[d(O,{onResize:B}),d("div",{class:"absolute-full",style:f.value},[d("div",{class:"scroll",style:l.value},[s])])]):s}}});export{me as Q,he as a,Se as b,fe as c};
