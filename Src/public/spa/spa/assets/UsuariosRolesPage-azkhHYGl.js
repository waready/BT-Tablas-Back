import{H as wt,I as Be,ax as dt,g as Le,r as P,e as k,o as ct,y as vt,ay as ve,az as Ct,p as N,a8 as ie,G as xt,ap as mt,aA as qt,t as Ie,c as $e,f as Ee,h as Je,w as Te,v as Pt,x as kt,q as De,C as Tt,aB as ft,l as Me,ar as xe,aC as Fe,a5 as Vt,m as Se,aD as lt,aE as _t,T as At,aF as Rt,aG as St,E as It,F as Lt,aH as $t,aI as Dt,aJ as Ut,_ as Nt,U as oe,N as z,V as r,O as q,W as fe,Q as o,R,a1 as ee,ac as Q,Z as pe,aK as Qt,X as J,M as qe,ad as je,ae as Oe,Y as Pe,$ as se,a7 as Ke,a9 as Bt,a0 as ke,aL as Et,aM as Mt}from"./index-DoNdm23b.js";import{Q as ze}from"./QBanner-BiBG92Dd.js";import{Q as Ft}from"./QResizeObserver-DpfH2OJr.js";import{r as jt,Q as Ge,b as We,c as Ot,d as Kt,e as ot,f as st}from"./QTable-BBpWQ1VS.js";import{Q as zt}from"./QBadge-Bi0qjQD1.js";import{Q as ge}from"./QTd-BVHgFqKU.js";import{g as nt,s as rt}from"./touch-BjYP5sR0.js";import{e as Gt}from"./position-engine-C0na6ooX.js";import{Q as He}from"./QForm-BhlBrbrm.js";import{Q as Wt}from"./QSpace-lc8PWthN.js";import{Q as Ht}from"./QBar-BdLwtCqC.js";import{Q as Xt}from"./QPage-D4RWoOZ7.js";import{A as E}from"./ApiService-D_JDuaKY.js";import"./axios-BXLeQQ8K.js";let Yt=0;const Jt=["click","keydown"],Zt={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Yt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ea(e,i,f,h){const d=wt(dt,Be);if(d===Be)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Be;const{proxy:s}=Le(),p=P(null),A=P(null),I=P(null),H=k(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),c=k(()=>d.currentModel.value===e.name),G=k(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(c.value===!0?" q-tab--active"+(d.tabProps.value.activeClass?" "+d.tabProps.value.activeClass:"")+(d.tabProps.value.activeColor?` text-${d.tabProps.value.activeColor}`:"")+(d.tabProps.value.activeBgColor?` bg-${d.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&d.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||d.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),T=k(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(d.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),L=k(()=>e.disable===!0||d.hasFocus.value===!0||c.value===!1&&d.hasActiveTab.value===!0?-1:e.tabindex||0);function v(g,U){if(U!==!0&&g?.qAvoidFocus!==!0&&p.value?.focus(),e.disable!==!0){d.updateModel({name:e.name}),f("click",g);return}}function M(g){mt(g,[13,32])?v(g,!0):qt(g)!==!0&&g.keyCode>=35&&g.keyCode<=40&&g.altKey!==!0&&g.metaKey!==!0&&d.onKbdNavigate(g.keyCode,s.$el)===!0&&Ie(g),f("keydown",g)}function W(){const g=d.tabProps.value.narrowIndicator,U=[],F=N("div",{ref:I,class:["q-tab__indicator",d.tabProps.value.indicatorClass]});e.icon!==void 0&&U.push(N(ie,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&U.push(N("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&U.push(e.alertIcon!==void 0?N(ie,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):N("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),g===!0&&U.push(F);const w=[N("div",{class:"q-focus-helper",tabindex:-1,ref:p}),N("div",{class:T.value},xt(i.default,U))];return g===!1&&w.push(F),w}const K={name:k(()=>e.name),rootRef:A,tabIndicatorRef:I,routeData:h};ct(()=>{d.unregisterTab(K)}),vt(()=>{d.registerTab(K)});function Z(g,U){const F={ref:A,class:G.value,tabindex:L.value,role:"tab","aria-selected":c.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:v,onKeydown:M,...U};return ve(N(g,F,W()),[[Ct,H.value]])}return{renderTab:Z,$tabs:d}}const Xe=$e({name:"QTab",props:Zt,emits:Jt,setup(e,{slots:i,emit:f}){const{renderTab:h}=ea(e,i,f);return()=>h("div")}});function ta(e,i,f){const h=f===!0?["left","right"]:["top","bottom"];return`absolute-${i===!0?h[0]:h[1]}${e?` text-${e}`:""}`}const aa=["left","center","right","justify"],la=$e({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>aa.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:i,emit:f}){const{proxy:h}=Le(),{$q:d}=h,{registerTick:s}=Ee(),{registerTick:p}=Ee(),{registerTick:A}=Ee(),{registerTimeout:I,removeTimeout:H}=Je(),{registerTimeout:c,removeTimeout:G}=Je(),T=P(null),L=P(null),v=P(e.modelValue),M=P(!1),W=P(!0),K=P(!1),Z=P(!1),g=[],U=P(0),F=P(!1);let w=null,X=null,B;const me=k(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:ta(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),y=k(()=>{const n=U.value,u=v.value;for(let b=0;b<n;b++)if(g[b].name.value===u)return!0;return!1}),ye=k(()=>`q-tabs__content--align-${M.value===!0?"left":Z.value===!0?"justify":e.align}`),te=k(()=>`q-tabs row no-wrap items-center q-tabs--${M.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),ue=k(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+ye.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),m=k(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),V=k(()=>e.vertical!==!0&&d.lang.rtl===!0),j=k(()=>jt===!1&&V.value===!0);Te(V,ae),Te(()=>e.modelValue,n=>{C({name:n,setCurrent:!0,skipEmit:!0})}),Te(()=>e.outsideArrows,de);function C({name:n,setCurrent:u,skipEmit:b}){v.value!==n&&(b!==!0&&e["onUpdate:modelValue"]!==void 0&&f("update:modelValue",n),(u===!0||e["onUpdate:modelValue"]===void 0)&&(Ue(v.value,n),v.value=n))}function de(){s(()=>{T.value&&he({width:T.value.offsetWidth,height:T.value.offsetHeight})})}function he(n){if(m.value===void 0||L.value===null)return;const u=n[m.value.container],b=Math.min(L.value[m.value.scroll],Array.prototype.reduce.call(L.value.children,(D,_)=>D+(_[m.value.content]||0),0)),$=u>0&&b>u;M.value=$,$===!0&&p(ae),Z.value=u<parseInt(e.breakpoint,10)}function Ue(n,u){const b=n!=null&&n!==""?g.find(D=>D.name.value===n):null,$=u!=null&&u!==""?g.find(D=>D.name.value===u):null;if(Re===!0)Re=!1;else if(b&&$){const D=b.tabIndicatorRef.value,_=$.tabIndicatorRef.value;w!==null&&(clearTimeout(w),w=null),D.style.transition="none",D.style.transform="none",_.style.transition="none",_.style.transform="none";const x=D.getBoundingClientRect(),O=_.getBoundingClientRect();_.style.transform=e.vertical===!0?`translate3d(0,${x.top-O.top}px,0) scale3d(1,${O.height?x.height/O.height:1},1)`:`translate3d(${x.left-O.left}px,0,0) scale3d(${O.width?x.width/O.width:1},1,1)`,A(()=>{w=setTimeout(()=>{w=null,_.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",_.style.transform="none"},70)})}$&&M.value===!0&&ne($.rootRef.value)}function ne(n){const{left:u,width:b,top:$,height:D}=L.value.getBoundingClientRect(),_=n.getBoundingClientRect();let x=e.vertical===!0?_.top-$:_.left-u;if(x<0){L.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(x),ae();return}x+=e.vertical===!0?_.height-D:_.width-b,x>0&&(L.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(x),ae())}function ae(){const n=L.value;if(n===null)return;const u=n.getBoundingClientRect(),b=e.vertical===!0?n.scrollTop:Math.abs(n.scrollLeft);V.value===!0?(W.value=Math.ceil(b+u.width)<n.scrollWidth-1,K.value=b>0):(W.value=b>0,K.value=e.vertical===!0?Math.ceil(b+u.height)<n.scrollHeight:Math.ceil(b+u.width)<n.scrollWidth)}function Ve(n){X!==null&&clearInterval(X),X=setInterval(()=>{l(n)===!0&&Y()},5)}function _e(){Ve(j.value===!0?Number.MAX_SAFE_INTEGER:0)}function ce(){Ve(j.value===!0?0:Number.MAX_SAFE_INTEGER)}function Y(){X!==null&&(clearInterval(X),X=null)}function we(n,u){const b=Array.prototype.filter.call(L.value.children,O=>O===u||O.matches&&O.matches(".q-tab.q-focusable")===!0),$=b.length;if($===0)return;if(n===36)return ne(b[0]),b[0].focus(),!0;if(n===35)return ne(b[$-1]),b[$-1].focus(),!0;const D=n===(e.vertical===!0?38:37),_=n===(e.vertical===!0?40:39),x=D===!0?-1:_===!0?1:void 0;if(x!==void 0){const O=V.value===!0?-1:1,le=b.indexOf(u)+x*O;return le>=0&&le<$&&(ne(b[le]),b[le].focus({preventScroll:!0})),!0}}const Ae=k(()=>j.value===!0?{get:n=>Math.abs(n.scrollLeft),set:(n,u)=>{n.scrollLeft=-u}}:e.vertical===!0?{get:n=>n.scrollTop,set:(n,u)=>{n.scrollTop=u}}:{get:n=>n.scrollLeft,set:(n,u)=>{n.scrollLeft=u}});function l(n){const u=L.value,{get:b,set:$}=Ae.value;let D=!1,_=b(u);const x=n<_?-1:1;return _+=x*5,_<0?(D=!0,_=0):(x===-1&&_<=n||x===1&&_>=n)&&(D=!0,_=n),$(u,_),ae(),D}function t(n,u){for(const b in n)if(n[b]!==u[b])return!1;return!0}function a(){let n=null,u={matchedLen:0,queryDiff:9999,hrefLen:0};const b=g.filter(x=>x.routeData?.hasRouterLink.value===!0),{hash:$,query:D}=h.$route,_=Object.keys(D).length;for(const x of b){const O=x.routeData.exact.value===!0;if(x.routeData[O===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:le,query:Ne,matched:yt,href:ht}=x.routeData.resolvedLink.value,Qe=Object.keys(Ne).length;if(O===!0){if(le!==$||Qe!==_||t(D,Ne)===!1)continue;n=x.name.value;break}if(le!==""&&le!==$||Qe!==0&&t(Ne,D)===!1)continue;const re={matchedLen:yt.length,queryDiff:_-Qe,hrefLen:ht.length-le.length};if(re.matchedLen>u.matchedLen){n=x.name.value,u=re;continue}else if(re.matchedLen!==u.matchedLen)continue;if(re.queryDiff<u.queryDiff)n=x.name.value,u=re;else if(re.queryDiff!==u.queryDiff)continue;re.hrefLen>u.hrefLen&&(n=x.name.value,u=re)}if(n===null&&g.some(x=>x.routeData===void 0&&x.name.value===v.value)===!0){Re=!1;return}C({name:n,setCurrent:!0})}function S(n){if(H(),F.value!==!0&&T.value!==null&&n.target&&typeof n.target.closest=="function"){const u=n.target.closest(".q-tab");u&&T.value.contains(u)===!0&&(F.value=!0,M.value===!0&&ne(u))}}function pt(){I(()=>{F.value=!1},30)}function Ce(){et.avoidRouteWatcher===!1?c(a):G()}function Ze(){if(B===void 0){const n=Te(()=>h.$route.fullPath,Ce);B=()=>{n(),B=void 0}}}function gt(n){g.push(n),U.value++,de(),n.routeData===void 0||h.$route===void 0?c(()=>{if(M.value===!0){const u=v.value,b=u!=null&&u!==""?g.find($=>$.name.value===u):null;b&&ne(b.rootRef.value)}}):(Ze(),n.routeData.hasRouterLink.value===!0&&Ce())}function bt(n){g.splice(g.indexOf(n),1),U.value--,de(),B!==void 0&&n.routeData!==void 0&&(g.every(u=>u.routeData===void 0)===!0&&B(),Ce())}const et={currentModel:v,tabProps:me,hasFocus:F,hasActiveTab:y,registerTab:gt,unregisterTab:bt,verifyRouteModel:Ce,updateModel:C,onKbdNavigate:we,avoidRouteWatcher:!1};Tt(dt,et);function tt(){w!==null&&clearTimeout(w),Y(),B?.()}let at,Re;return ct(tt),Pt(()=>{at=B!==void 0,tt()}),kt(()=>{at===!0&&(Ze(),Re=!0,Ce()),de()}),()=>N("div",{ref:T,class:te.value,role:"tablist",onFocusin:S,onFocusout:pt},[N(Ft,{onResize:he}),N("div",{ref:L,class:ue.value,onScroll:ae},De(i.default)),N(ie,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(W.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||d.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:_e,onTouchstartPassive:_e,onMouseupPassive:Y,onMouseleavePassive:Y,onTouchendPassive:Y}),N(ie,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(K.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||d.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ce,onTouchstartPassive:ce,onMouseupPassive:Y,onMouseleavePassive:Y,onTouchendPassive:Y})])}});function oa(e){const i=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((f,h)=>{const d=parseFloat(f);d&&(i[h]=d)}),i}const sa=ft({name:"touch-swipe",beforeMount(e,{value:i,arg:f,modifiers:h}){if(h.mouse!==!0&&xe.has.touch!==!0)return;const d=h.mouseCapture===!0?"Capture":"",s={handler:i,sensitivity:oa(f),direction:nt(h),noop:Vt,mouseStart(p){rt(p,s)&&_t(p)&&(Se(s,"temp",[[document,"mousemove","move",`notPassive${d}`],[document,"mouseup","end","notPassiveCapture"]]),s.start(p,!0))},touchStart(p){if(rt(p,s)){const A=p.target;Se(s,"temp",[[A,"touchmove","move","notPassiveCapture"],[A,"touchcancel","end","notPassiveCapture"],[A,"touchend","end","notPassiveCapture"]]),s.start(p)}},start(p,A){xe.is.firefox===!0&&Fe(e,!0);const I=lt(p);s.event={x:I.left,y:I.top,time:Date.now(),mouse:A===!0,dir:!1}},move(p){if(s.event===void 0)return;if(s.event.dir!==!1){Ie(p);return}const A=Date.now()-s.event.time;if(A===0)return;const I=lt(p),H=I.left-s.event.x,c=Math.abs(H),G=I.top-s.event.y,T=Math.abs(G);if(s.event.mouse!==!0){if(c<s.sensitivity[1]&&T<s.sensitivity[1]){s.end(p);return}}else if(window.getSelection().toString()!==""){s.end(p);return}else if(c<s.sensitivity[2]&&T<s.sensitivity[2])return;const L=c/A,v=T/A;s.direction.vertical===!0&&c<T&&c<100&&v>s.sensitivity[0]&&(s.event.dir=G<0?"up":"down"),s.direction.horizontal===!0&&c>T&&T<100&&L>s.sensitivity[0]&&(s.event.dir=H<0?"left":"right"),s.direction.up===!0&&c<T&&G<0&&c<100&&v>s.sensitivity[0]&&(s.event.dir="up"),s.direction.down===!0&&c<T&&G>0&&c<100&&v>s.sensitivity[0]&&(s.event.dir="down"),s.direction.left===!0&&c>T&&H<0&&T<100&&L>s.sensitivity[0]&&(s.event.dir="left"),s.direction.right===!0&&c>T&&H>0&&T<100&&L>s.sensitivity[0]&&(s.event.dir="right"),s.event.dir!==!1?(Ie(p),s.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Gt(),s.styleCleanup=M=>{s.styleCleanup=void 0,document.body.classList.remove("non-selectable");const W=()=>{document.body.classList.remove("no-pointer-events--children")};M===!0?setTimeout(W,50):W()}),s.handler({evt:p,touch:s.event.mouse!==!0,mouse:s.event.mouse,direction:s.event.dir,duration:A,distance:{x:c,y:T}})):s.end(p)},end(p){s.event!==void 0&&(Me(s,"temp"),xe.is.firefox===!0&&Fe(e,!1),s.styleCleanup?.(!0),p!==void 0&&s.event.dir!==!1&&Ie(p),s.event=void 0)}};if(e.__qtouchswipe=s,h.mouse===!0){const p=h.mouseCapture===!0||h.mousecapture===!0?"Capture":"";Se(s,"main",[[e,"mousedown","mouseStart",`passive${p}`]])}xe.has.touch===!0&&Se(s,"main",[[e,"touchstart","touchStart",`passive${h.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,i){const f=e.__qtouchswipe;f!==void 0&&(i.oldValue!==i.value&&(typeof i.value!="function"&&f.end(),f.handler=i.value),f.direction=nt(i.modifiers))},beforeUnmount(e){const i=e.__qtouchswipe;i!==void 0&&(Me(i,"main"),Me(i,"temp"),xe.is.firefox===!0&&Fe(e,!1),i.styleCleanup?.(),delete e.__qtouchswipe)}});function na(){let e=Object.create(null);return{getCache:(i,f)=>e[i]===void 0?e[i]=typeof f=="function"?f():f:e[i],setCache(i,f){e[i]=f},hasCache(i){return Object.hasOwnProperty.call(e,i)},clearCache(i){i!==void 0?delete e[i]:e=Object.create(null)}}}const ra={name:{required:!0},disable:Boolean},it={setup(e,{slots:i}){return()=>N("div",{class:"q-panel scroll",role:"tabpanel"},De(i.default))}},ia={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},ua=["update:modelValue","beforeTransition","transition"];function da(){const{props:e,emit:i,proxy:f}=Le(),{getCache:h}=na(),{registerTimeout:d}=Je();let s,p;const A=P(null),I={value:null};function H(m){const V=e.vertical===!0?"up":"left";B((f.$q.lang.rtl===!0?-1:1)*(m.direction===V?1:-1))}const c=k(()=>[[sa,H,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),G=k(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),T=k(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),L=k(()=>`--q-transition-duration: ${e.transitionDuration}ms`),v=k(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),M=k(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),W=k(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);Te(()=>e.modelValue,(m,V)=>{const j=U(m)===!0?F(m):-1;p!==!0&&X(j===-1?0:j<F(V)?-1:1),I.value!==j&&(I.value=j,i("beforeTransition",m,V),d(()=>{i("transition",m,V)},e.transitionDuration))});function K(){B(1)}function Z(){B(-1)}function g(m){i("update:modelValue",m)}function U(m){return m!=null&&m!==""}function F(m){return s.findIndex(V=>V.props.name===m&&V.props.disable!==""&&V.props.disable!==!0)}function w(){return s.filter(m=>m.props.disable!==""&&m.props.disable!==!0)}function X(m){const V=m!==0&&e.animated===!0&&I.value!==-1?"q-transition--"+(m===-1?G.value:T.value):null;A.value!==V&&(A.value=V)}function B(m,V=I.value){let j=V+m;for(;j!==-1&&j<s.length;){const C=s[j];if(C!==void 0&&C.props.disable!==""&&C.props.disable!==!0){X(m),p=!0,i("update:modelValue",C.props.name),setTimeout(()=>{p=!1});return}j+=m}e.infinite===!0&&s.length!==0&&V!==-1&&V!==s.length&&B(m,m===-1?s.length:-1)}function me(){const m=F(e.modelValue);return I.value!==m&&(I.value=m),!0}function y(){const m=U(e.modelValue)===!0&&me()&&s[I.value];return e.keepAlive===!0?[N(St,M.value,[N(W.value===!0?h(v.value,()=>({...it,name:v.value})):it,{key:v.value,style:L.value},()=>m)])]:[N("div",{class:"q-panel scroll",style:L.value,key:v.value,role:"tabpanel"},[m])]}function ye(){if(s.length!==0)return e.animated===!0?[N(At,{name:A.value},y)]:y()}function te(m){return s=Rt(De(m.default,[])).filter(V=>V.props!==null&&V.props.slot===void 0&&U(V.props.name)===!0),s.length}function ue(){return s}return Object.assign(f,{next:K,previous:Z,goTo:g}),{panelIndex:I,panelDirectives:c,updatePanelsList:te,updatePanelIndex:me,getPanelContent:ye,getEnabledPanels:w,getPanels:ue,isValidPanelName:U,keepAliveProps:M,needsUniqueKeepAliveWrapper:W,goToPanelByOffset:B,goToPanel:g,nextPanel:K,previousPanel:Z}}const Ye=$e({name:"QTabPanel",props:ra,setup(e,{slots:i}){return()=>N("div",{class:"q-tab-panel",role:"tabpanel"},De(i.default))}}),ca=$e({name:"QTabPanels",props:{...ia,...It},emits:ua,setup(e,{slots:i}){const f=Le(),h=Lt(e,f.proxy.$q),{updatePanelsList:d,getPanelContent:s,panelDirectives:p}=da(),A=k(()=>"q-tab-panels q-panel-parent"+(h.value===!0?" q-tab-panels--dark q-dark":""));return()=>(d(i),$t("div",{class:A.value},s(),"pan",e.swipeable,()=>p.value))}});function ut(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const i=parseInt(e,10);return isNaN(i)?0:i}const be=ft({name:"close-popup",beforeMount(e,{value:i}){const f={depth:ut(i),handler(h){f.depth!==0&&setTimeout(()=>{const d=Dt(e);d!==void 0&&Ut(d,h,f.depth)})},handlerKey(h){mt(h,13)===!0&&f.handler(h)}};e.__qclosepopup=f,e.addEventListener("click",f.handler),e.addEventListener("keyup",f.handlerKey)},updated(e,{value:i,oldValue:f}){i!==f&&(e.__qclosepopup.depth=ut(i))},beforeUnmount(e){const i=e.__qclosepopup;e.removeEventListener("click",i.handler),e.removeEventListener("keyup",i.handlerKey),delete e.__qclosepopup}}),va={class:"row items-center justify-between q-mb-md"},ma={class:"row items-center q-gutter-sm"},fa={class:"row items-center justify-between q-mb-sm"},pa={key:0,class:"text-caption text-grey-6"},ga={class:"row items-center justify-between q-mb-sm"},ba={class:"row items-center justify-between q-mb-sm"},ya={class:"text-h6"},ha={class:"text-h6"},wa={class:"text-h6"},Ca={class:"text-subtitle1"},xa={class:"row q-col-gutter-lg"},qa={class:"col-12 col-md-4"},Pa={class:"col-12 col-md-8"},ka={class:"q-gutter-xs"},Ta={key:0,class:"text-caption text-grey-6"},Va={class:"text-h6"},_a={__name:"UsuariosRolesPage",setup(e){const i=l=>{if(Array.isArray(l))return l;if(l&&typeof l=="object"){const t=["rows","data","items","users","roles","permissions"];for(const a of t)if(Array.isArray(l[a]))return l[a]}return[]},f=P("users"),h=P(!1),d=P(""),s=P([]),p=P(!1),A=P(""),I=[{name:"email",label:"Email",field:"email",align:"left",sortable:!0},{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"isActive",label:"Estado",field:"isActive",align:"center"},{name:"roles",label:"Roles",field:"roles",align:"left"},{name:"actions",label:"Acciones",field:"actions",align:"right"}],H=k(()=>{const l=i(s.value);if(!A.value)return l;const t=A.value.toLowerCase();return l.filter(a=>(a.email||"").toLowerCase().includes(t)||(a.name||"").toLowerCase().includes(t))}),c=P({show:!1,editing:!1,loading:!1,form:{id:null,email:"",name:"",isActive:!0,password:""}}),G=l=>{c.value.show=!0,c.value.loading=!1,l?(c.value.editing=!0,c.value.form={id:l.id,email:l.email,name:l.name,isActive:!!l.isActive,password:""}):(c.value.editing=!1,c.value.form={id:null,email:"",name:"",isActive:!0,password:""})},T=async()=>{const l=c.value.form;if(l.email&&!(!c.value.editing&&!l.password)){c.value.loading=!0;try{c.value.editing&&l.id?await E.updateUser(l.id,{email:l.email,name:l.name,isActive:l.isActive}):await E.createUser({email:l.email,name:l.name,isActive:l.isActive,password:l.password}),c.value.show=!1,await ce()}catch(t){console.error(t),d.value=t.response?.data?.message||t.message||"No se pudo guardar el usuario."}finally{c.value.loading=!1}}},L=async l=>{if(l?.id&&confirm(`¿Eliminar el usuario "${l.email}"?`))try{await E.deleteUser(l.id),await ce()}catch(t){console.error(t),d.value=t.response?.data?.message||t.message||"No se pudo eliminar el usuario."}},v=P({show:!1,user:null,selectedIds:[],loading:!1,error:""}),M=async l=>{v.value.show=!0,v.value.user=l,v.value.selectedIds=[],v.value.loading=!0,v.value.error="";try{const{data:t}=await E.getUserRoles(l.id),a=i(t);v.value.selectedIds=a.map(S=>S.id)}catch(t){console.error(t),v.value.error=t.response?.data?.message||t.message||"No se pudieron cargar los roles."}finally{v.value.loading=!1}},W=async()=>{if(v.value.user){v.value.loading=!0;try{const t=v.value.selectedIds.map(a=>({id:a}));await E.setUserRoles(v.value.user.id,{roles:t}),v.value.show=!1,await ce()}catch(l){console.error(l),v.value.error=l.response?.data?.message||l.message||"No se pudieron guardar los roles."}finally{v.value.loading=!1}}},K=P([]),Z=P(!1),g=P(""),U=[{name:"name",label:"Nombre",field:"name",align:"left",sortable:!0},{name:"description",label:"Descripción",field:"description",align:"left"},{name:"actions",label:"Acciones",field:"actions",align:"right"}],F=k(()=>{const l=i(K.value);if(!g.value)return l;const t=g.value.toLowerCase();return l.filter(a=>(a.name||"").toLowerCase().includes(t)||(a.description||"").toLowerCase().includes(t))}),w=P({show:!1,editing:!1,loading:!1,form:{id:null,name:"",description:""}}),X=l=>{w.value.show=!0,w.value.loading=!1,l?(w.value.editing=!0,w.value.form={id:l.id,name:l.name,description:l.description||""}):(w.value.editing=!1,w.value.form={id:null,name:"",description:""})},B=async()=>{const l=w.value.form;if(l.name){w.value.loading=!0;try{w.value.editing&&l.id?await E.updateRole(l.id,{name:l.name,description:l.description}):await E.createRole({name:l.name,description:l.description}),w.value.show=!1,await Y()}catch(t){console.error(t),d.value=t.response?.data?.message||t.message||"No se pudo guardar el rol."}finally{w.value.loading=!1}}},me=async l=>{if(l?.id&&confirm(`¿Eliminar el rol "${l.name}"?`))try{await E.deleteRole(l.id),await Y()}catch(t){console.error(t),d.value=t.response?.data?.message||t.message||"No se pudo eliminar el rol."}},y=P({show:!1,role:null,selectedIds:[],filter:"",loading:!1,error:""}),ye=async l=>{y.value.show=!0,y.value.role=l,y.value.selectedIds=[],y.value.filter="",y.value.loading=!0,y.value.error="";try{const{data:t}=await E.getRole(l.id);let a=[];Array.isArray(t?.permissions)&&(a=t.permissions.map(S=>S.permission?S.permission:S)),y.value.selectedIds=a.map(S=>S.id)}catch(t){console.error(t),y.value.error=t.response?.data?.message||t.message||"No se pudieron cargar los permisos del rol."}finally{y.value.loading=!1}},te=P([]),ue=P(!1),m=P(""),V=[{name:"tag",label:"Permiso",field:"tag",align:"left"},{name:"description",label:"Descripción",field:"description",align:"left"},{name:"actions",label:"Acciones",field:"actions",align:"right"}],j=k(()=>{const l=i(te.value);if(!m.value)return l;const t=m.value.toLowerCase();return l.filter(a=>(a.action||"").toLowerCase().includes(t)||(a.resource||"").toLowerCase().includes(t)||(a.description||"").toLowerCase().includes(t))}),C=P({show:!1,editing:!1,loading:!1,form:{id:null,action:"",resource:"",description:""}}),de=l=>{C.value.show=!0,C.value.loading=!1,l?(C.value.editing=!0,C.value.form={id:l.id,action:l.action,resource:l.resource,description:l.description||""}):(C.value.editing=!1,C.value.form={id:null,action:"",resource:"",description:""})},he=async()=>{const l=C.value.form;if(!(!l.action||!l.resource)){C.value.loading=!0;try{C.value.editing&&l.id?await E.updatePermission(l.id,{action:l.action,resource:l.resource,description:l.description}):await E.createPermission({action:l.action,resource:l.resource,description:l.description}),C.value.show=!1,await we()}catch(t){console.error(t),d.value=t.response?.data?.message||t.message||"No se pudo guardar el permiso."}finally{C.value.loading=!1}}},Ue=async l=>{if(l?.id&&confirm(`¿Eliminar el permiso "${l.action}:${l.resource}"?`))try{await E.deletePermission(l.id),await we()}catch(t){console.error(t),d.value=t.response?.data?.message||t.message||"No se pudo eliminar el permiso."}},ne=k(()=>{const l=i(te.value),t=y.value.filter.toLowerCase();return t?l.filter(a=>(a.action||"").toLowerCase().includes(t)||(a.resource||"").toLowerCase().includes(t)||(a.description||"").toLowerCase().includes(t)):l}),ae=k(()=>i(te.value).filter(t=>y.value.selectedIds.includes(t.id))),Ve=l=>{const t=y.value.selectedIds.indexOf(l);t>=0&&y.value.selectedIds.splice(t,1)},_e=async()=>{if(y.value.role){y.value.loading=!0;try{const t=y.value.selectedIds.map(a=>({id:a}));await E.setRolePermissions(y.value.role.id,{permissions:t}),y.value.show=!1}catch(l){console.error(l),y.value.error=l.response?.data?.message||l.message||"No se pudieron guardar los permisos del rol."}finally{y.value.loading=!1}}},ce=async()=>{p.value=!0;try{const{data:l}=await E.getUsers();s.value=i(l)}catch(l){console.error(l),d.value=l.response?.data?.message||l.message||"No se pudieron cargar los usuarios.",s.value=[]}finally{p.value=!1}},Y=async()=>{Z.value=!0;try{const{data:l}=await E.getRoles();K.value=i(l)}catch(l){console.error(l),d.value=l.response?.data?.message||l.message||"No se pudieron cargar los roles.",K.value=[]}finally{Z.value=!1}},we=async()=>{ue.value=!0;try{const{data:l}=await E.getPermissions();te.value=i(l)}catch(l){console.error(l),d.value=l.response?.data?.message||l.message||"No se pudieron cargar los permisos.",te.value=[]}finally{ue.value=!1}},Ae=async()=>{h.value=!0,await Promise.all([ce(),Y(),we()]),h.value=!1};return vt(Ae),(l,t)=>(z(),oe(Xt,{class:"q-pa-md q-pb-xl"},{default:r(()=>[q("div",va,[t[28]||(t[28]=q("div",null,[q("div",{class:"text-h5 text-weight-bold"}," Centro de seguridad "),q("div",{class:"text-caption text-grey-6"}," Gestión de usuarios, roles y permisos del sistema. ")],-1)),q("div",ma,[o(R,{color:"primary",outline:"",icon:"refresh",label:"Actualizar",loading:h.value,onClick:Ae},null,8,["loading"])])]),d.value?(z(),oe(ze,{key:0,class:"bg-red-9 text-white q-mb-md shadow-2",rounded:"",dense:"","inline-actions":""},{action:r(()=>[o(R,{flat:"",dense:"",color:"white",label:"Cerrar",onClick:t[0]||(t[0]=a=>d.value="")})]),default:r(()=>[ee(Q(d.value)+" ",1)]),_:1})):fe("",!0),o(pe,{flat:"",bordered:"",class:"q-pa-md shadow-2 rounded-borders"},{default:r(()=>[o(la,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),dense:"",align:"left",class:"text-grey-7","active-color":"primary","indicator-color":"primary"},{default:r(()=>[o(Xe,{name:"users",icon:"people",label:"Usuarios"}),o(Xe,{name:"roles",icon:"security",label:"Roles"}),o(Xe,{name:"permissions",icon:"vpn_key",label:"Permisos"})]),_:1},8,["modelValue"]),o(Qt,{class:"q-my-sm"}),(z(),oe(ca,{modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=a=>f.value=a),animated:"",key:f.value},{default:r(()=>[o(Ye,{name:"users"},{default:r(()=>[q("div",fa,[o(J,{modelValue:A.value,"onUpdate:modelValue":t[2]||(t[2]=a=>A.value=a),dense:"",outlined:"",clearable:"",debounce:"300",placeholder:"Buscar usuario...",class:"col-12 col-sm-6 col-md-4"},{append:r(()=>[o(ie,{name:"search"})]),_:1},8,["modelValue"]),o(R,{color:"primary",icon:"add",label:"Nuevo usuario",onClick:t[3]||(t[3]=a=>G())})]),o(Ge,{rows:H.value,columns:I,"row-key":"id",flat:"",bordered:"",loading:p.value,"no-data-label":"No hay usuarios registrados.",class:"rounded-borders"},{top:r(()=>[...t[29]||(t[29]=[q("div",{class:"text-subtitle2 text-grey-7"}," Usuarios registrados ",-1)])]),"body-cell-isActive":r(a=>[o(ge,{props:a,class:"text-center"},{default:r(()=>[o(zt,{color:a.row.isActive?"positive":"negative",transparent:""},{default:r(()=>[ee(Q(a.row.isActive?"Activo":"Inactivo"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-roles":r(a=>[o(ge,{props:a},{default:r(()=>[(z(!0),qe(je,null,Oe(a.row.roles||[],S=>(z(),oe(We,{key:S.id,dense:"",square:"",color:"primary","text-color":"white",class:"q-mr-xs q-mb-xs"},{default:r(()=>[ee(Q(S.name),1)]),_:2},1024))),128)),!a.row.roles||!a.row.roles.length?(z(),qe("span",pa," Sin roles ")):fe("",!0)]),_:2},1032,["props"])]),"body-cell-actions":r(a=>[o(ge,{props:a,class:"text-right"},{default:r(()=>[o(R,{dense:"",flat:"",round:"",icon:"rule",color:"secondary",title:`Asignar roles a ${a.row.name||a.row.email}`,onClick:S=>M(a.row)},null,8,["title","onClick"]),o(R,{dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:S=>G(a.row)},null,8,["onClick"]),o(R,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:S=>L(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])]),_:1}),o(Ye,{name:"roles"},{default:r(()=>[q("div",ga,[o(J,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=a=>g.value=a),dense:"",outlined:"",clearable:"",debounce:"300",placeholder:"Buscar rol...",class:"col-12 col-sm-6 col-md-4"},{append:r(()=>[o(ie,{name:"search"})]),_:1},8,["modelValue"]),o(R,{color:"primary",icon:"add",label:"Nuevo rol",onClick:t[5]||(t[5]=a=>X())})]),o(Ge,{rows:F.value,columns:U,"row-key":"id",flat:"",bordered:"",loading:Z.value,"no-data-label":"No hay roles registrados.",class:"rounded-borders"},{top:r(()=>[...t[30]||(t[30]=[q("div",{class:"text-subtitle2 text-grey-7"}," Roles disponibles ",-1)])]),"body-cell-actions":r(a=>[o(ge,{props:a,class:"text-right"},{default:r(()=>[o(R,{dense:"",flat:"",round:"",icon:"vpn_key",color:"secondary",title:`Configurar permisos de ${a.row.name}`,onClick:S=>ye(a.row)},null,8,["title","onClick"]),o(R,{dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:S=>X(a.row)},null,8,["onClick"]),o(R,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:S=>me(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])]),_:1}),o(Ye,{name:"permissions"},{default:r(()=>[q("div",ba,[o(J,{modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=a=>m.value=a),dense:"",outlined:"",clearable:"",debounce:"300",placeholder:"Buscar permiso...",class:"col-12 col-sm-6 col-md-4"},{append:r(()=>[o(ie,{name:"search"})]),_:1},8,["modelValue"]),o(R,{color:"primary",icon:"add",label:"Nuevo permiso",onClick:t[7]||(t[7]=a=>de())})]),o(Ge,{rows:j.value,columns:V,"row-key":"id",flat:"",bordered:"",loading:ue.value,"no-data-label":"No hay permisos registrados.",class:"rounded-borders"},{top:r(()=>[...t[31]||(t[31]=[q("div",{class:"text-subtitle2 text-grey-7"}," Permisos configurados ",-1)])]),"body-cell-tag":r(a=>[o(ge,{props:a},{default:r(()=>[o(We,{square:"",dense:"",color:"grey-9","text-color":"white",class:"q-mr-xs"},{default:r(()=>[ee(Q(a.row.action)+" : "+Q(a.row.resource),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-actions":r(a=>[o(ge,{props:a,class:"text-right"},{default:r(()=>[o(R,{dense:"",flat:"",round:"",icon:"edit",color:"primary",onClick:S=>de(a.row)},null,8,["onClick"]),o(R,{dense:"",flat:"",round:"",icon:"delete",color:"negative",onClick:S=>Ue(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"])]),_:1})]),_:1},8,["modelValue"]))]),_:1}),o(Pe,{modelValue:c.value.show,"onUpdate:modelValue":t[13]||(t[13]=a=>c.value.show=a),persistent:""},{default:r(()=>[o(pe,{class:"dialog-card"},{default:r(()=>[o(se,null,{default:r(()=>[q("div",ya,Q(c.value.editing?"Editar usuario":"Nuevo usuario"),1),t[32]||(t[32]=q("div",{class:"text-caption text-grey-6"}," Define los datos básicos del usuario. ",-1))]),_:1}),o(se,{class:"q-pt-none"},{default:r(()=>[o(He,{onSubmit:Ke(T,["prevent"])},{default:r(()=>[o(J,{modelValue:c.value.form.email,"onUpdate:modelValue":t[9]||(t[9]=a=>c.value.form.email=a),label:"Email *",type:"email",dense:"",outlined:"",class:"q-mb-sm",rules:[a=>!!a||"Email requerido"]},null,8,["modelValue","rules"]),o(J,{modelValue:c.value.form.name,"onUpdate:modelValue":t[10]||(t[10]=a=>c.value.form.name=a),label:"Nombre",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),o(Bt,{modelValue:c.value.form.isActive,"onUpdate:modelValue":t[11]||(t[11]=a=>c.value.form.isActive=a),label:"Usuario activo",class:"q-mb-sm"},null,8,["modelValue"]),c.value.editing?fe("",!0):(z(),oe(J,{key:0,modelValue:c.value.form.password,"onUpdate:modelValue":t[12]||(t[12]=a=>c.value.form.password=a),label:"Contraseña *",type:"password",dense:"",outlined:"",class:"q-mb-sm",rules:[a=>!!a||"Contraseña requerida"]},null,8,["modelValue","rules"]))]),_:1})]),_:1}),o(ke,{align:"right"},{default:r(()=>[ve(o(R,{flat:"",label:"Cancelar",color:"grey-7"},null,512),[[be]]),o(R,{color:"primary",label:"Guardar",loading:c.value.loading,onClick:T},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Pe,{modelValue:v.value.show,"onUpdate:modelValue":t[16]||(t[16]=a=>v.value.show=a),persistent:""},{default:r(()=>[o(pe,{class:"dialog-card"},{default:r(()=>[o(se,null,{default:r(()=>[q("div",ha,[t[33]||(t[33]=ee(" Roles de usuario: ",-1)),q("strong",null,Q(v.value.user?.name||v.value.user?.email),1)]),t[34]||(t[34]=q("div",{class:"text-caption text-grey-6"}," Selecciona los roles que definen los permisos del usuario. ",-1))]),_:1}),o(se,{class:"q-pt-none q-gutter-sm"},{default:r(()=>[v.value.error?(z(),oe(ze,{key:0,class:"bg-red-9 text-white",dense:"","inline-actions":""},{action:r(()=>[o(R,{flat:"",dense:"",color:"white",label:"Cerrar",onClick:t[14]||(t[14]=a=>v.value.error="")})]),default:r(()=>[ee(Q(v.value.error)+" ",1)]),_:1})):fe("",!0),o(Et,{modelValue:v.value.selectedIds,"onUpdate:modelValue":t[15]||(t[15]=a=>v.value.selectedIds=a),type:"checkbox",options:K.value.map(a=>({label:a.name,value:a.id})),color:"primary"},null,8,["modelValue","options"])]),_:1}),o(ke,{align:"right"},{default:r(()=>[ve(o(R,{flat:"",label:"Cancelar",color:"grey-7"},null,512),[[be]]),o(R,{color:"primary",label:"Guardar",loading:v.value.loading,onClick:W},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Pe,{modelValue:w.value.show,"onUpdate:modelValue":t[19]||(t[19]=a=>w.value.show=a),persistent:""},{default:r(()=>[o(pe,{class:"dialog-card"},{default:r(()=>[o(se,null,{default:r(()=>[q("div",wa,Q(w.value.editing?"Editar rol":"Nuevo rol"),1),t[35]||(t[35]=q("div",{class:"text-caption text-grey-6"}," Un rol agrupa permisos y se asigna a los usuarios. ",-1))]),_:1}),o(se,{class:"q-pt-none"},{default:r(()=>[o(He,{onSubmit:Ke(B,["prevent"])},{default:r(()=>[o(J,{modelValue:w.value.form.name,"onUpdate:modelValue":t[17]||(t[17]=a=>w.value.form.name=a),label:"Nombre del rol *",dense:"",outlined:"",class:"q-mb-sm",rules:[a=>!!a||"Nombre requerido"]},null,8,["modelValue","rules"]),o(J,{modelValue:w.value.form.description,"onUpdate:modelValue":t[18]||(t[18]=a=>w.value.form.description=a),label:"Descripción",dense:"",outlined:"",type:"textarea",autogrow:"",class:"q-mb-sm"},null,8,["modelValue"])]),_:1})]),_:1}),o(ke,{align:"right"},{default:r(()=>[ve(o(R,{flat:"",label:"Cancelar",color:"grey-7"},null,512),[[be]]),o(R,{color:"primary",label:"Guardar",loading:w.value.loading,onClick:B},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Pe,{modelValue:y.value.show,"onUpdate:modelValue":t[23]||(t[23]=a=>y.value.show=a),persistent:"",maximized:""},{default:r(()=>[o(pe,null,{default:r(()=>[o(Ht,null,{default:r(()=>[q("div",Ca,[t[36]||(t[36]=ee(" Permisos del rol: ",-1)),q("strong",null,Q(y.value.role?.name),1)]),o(Wt),ve(o(R,{dense:"",flat:"",icon:"close"},null,512),[[be]])]),_:1}),o(se,{class:"q-gutter-md"},{default:r(()=>[y.value.error?(z(),oe(ze,{key:0,class:"bg-red-9 text-white",dense:"","inline-actions":""},{action:r(()=>[o(R,{flat:"",dense:"",color:"white",label:"Cerrar",onClick:t[20]||(t[20]=a=>y.value.error="")})]),default:r(()=>[ee(Q(y.value.error)+" ",1)]),_:1})):fe("",!0),q("div",xa,[q("div",qa,[t[37]||(t[37]=q("div",{class:"text-subtitle2 q-mb-xs"}," Permisos disponibles ",-1)),t[38]||(t[38]=q("div",{class:"text-caption text-grey-6 q-mb-sm"}," Marca los permisos que tendrá este rol. ",-1)),o(J,{modelValue:y.value.filter,"onUpdate:modelValue":t[21]||(t[21]=a=>y.value.filter=a),dense:"",outlined:"",clearable:"",debounce:"300",placeholder:"Buscar permiso...",class:"q-mb-sm"},{append:r(()=>[o(ie,{name:"search"})]),_:1},8,["modelValue"]),o(Ot,{bordered:"",class:"rounded-borders scroll",style:{"max-height":"60vh"}},{default:r(()=>[(z(!0),qe(je,null,Oe(ne.value,a=>(z(),oe(Kt,{key:a.id,tag:"label",clickable:"",dense:""},{default:r(()=>[o(ot,{avatar:""},{default:r(()=>[o(Mt,{modelValue:y.value.selectedIds,"onUpdate:modelValue":t[22]||(t[22]=S=>y.value.selectedIds=S),val:a.id,dense:""},null,8,["modelValue","val"])]),_:2},1024),o(ot,null,{default:r(()=>[o(st,null,{default:r(()=>[ee(Q(a.action)+" : "+Q(a.resource),1)]),_:2},1024),o(st,{caption:""},{default:r(()=>[ee(Q(a.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),q("div",Pa,[t[39]||(t[39]=q("div",{class:"text-subtitle2 q-mb-xs"}," Permisos asignados ",-1)),t[40]||(t[40]=q("div",{class:"text-caption text-grey-6 q-mb-sm"}," Vista rápida de lo que el rol podrá hacer. ",-1)),q("div",ka,[(z(!0),qe(je,null,Oe(ae.value,a=>(z(),oe(We,{key:a.id,square:"",dense:"",color:"primary","text-color":"white",removable:"",onRemove:S=>Ve(a.id),class:"q-mb-xs"},{default:r(()=>[ee(Q(a.action)+" : "+Q(a.resource),1)]),_:2},1032,["onRemove"]))),128)),ae.value.length?fe("",!0):(z(),qe("div",Ta," Este rol aún no tiene permisos asignados. "))])])])]),_:1}),o(ke,{align:"right"},{default:r(()=>[ve(o(R,{flat:"",label:"Cerrar",color:"grey-7"},null,512),[[be]]),o(R,{color:"primary",label:"Guardar cambios",loading:y.value.loading,onClick:_e},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Pe,{modelValue:C.value.show,"onUpdate:modelValue":t[27]||(t[27]=a=>C.value.show=a),persistent:""},{default:r(()=>[o(pe,{class:"dialog-card"},{default:r(()=>[o(se,null,{default:r(()=>[q("div",Va,Q(C.value.editing?"Editar permiso":"Nuevo permiso"),1),t[41]||(t[41]=q("div",{class:"text-caption text-grey-6"}," Define la acción y el recurso que controla este permiso. ",-1))]),_:1}),o(se,{class:"q-pt-none"},{default:r(()=>[o(He,{onSubmit:Ke(he,["prevent"])},{default:r(()=>[o(J,{modelValue:C.value.form.action,"onUpdate:modelValue":t[24]||(t[24]=a=>C.value.form.action=a),label:"Acción (read, create, update...) *",dense:"",outlined:"",class:"q-mb-sm",rules:[a=>!!a||"Acción requerida"]},null,8,["modelValue","rules"]),o(J,{modelValue:C.value.form.resource,"onUpdate:modelValue":t[25]||(t[25]=a=>C.value.form.resource=a),label:"Recurso (users, roles, inventario...) *",dense:"",outlined:"",class:"q-mb-sm",rules:[a=>!!a||"Recurso requerido"]},null,8,["modelValue","rules"]),o(J,{modelValue:C.value.form.description,"onUpdate:modelValue":t[26]||(t[26]=a=>C.value.form.description=a),label:"Descripción",dense:"",outlined:"",type:"textarea",autogrow:"",class:"q-mb-sm"},null,8,["modelValue"])]),_:1})]),_:1}),o(ke,{align:"right"},{default:r(()=>[ve(o(R,{flat:"",label:"Cancelar",color:"grey-7"},null,512),[[be]]),o(R,{color:"primary",label:"Guardar",loading:C.value.loading,onClick:he},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},ja=Nt(_a,[["__scopeId","data-v-62cfe7da"]]);export{ja as default};
